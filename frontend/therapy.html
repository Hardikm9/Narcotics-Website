<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
Â  <title>Therapy Chat â€“ NarcStop AI</title>
Â  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
Â  <nav>
Â  Â  <div class="logo">ðŸ§  NarcStop AI</div>
Â  Â  <ul class="nav-links">
Â  Â  Â  <li><a href="index.html">Home</a></li>
Â  Â  Â  <li><a href="report.html">Report</a></li>
Â  Â  Â  <li><a href="therapy.html" class="active">Therapy Chat</a></li>
Â  Â  Â  <li><a href="dashboard.html">Dashboard</a></li>
Â  Â  Â  <li><a href="resources.html">Resources</a></li>
Â  Â  Â  <li><a href="sos.html">Relapse SOS</a></li>
Â  Â  Â  <li><a href="feedback.html">Feedback</a></li>
Â  Â  </ul>
Â  Â  <button id="darkModeToggle">ðŸŒ™</button>
Â  </nav>

Â  <main class="page-content">
Â  Â  <h1>AI Therapy Assistant</h1>
Â  Â  <p>Your personal support guide. Share how you feel. Get real help.</p>

Â  Â  <!-- Hero Image -->
Â  Â  <img src="assets/hero-image.png" alt="Therapy Illustration" style="width:100%; max-height:300px; object-fit:cover; border-radius:10px; margin-bottom: 1rem;" />

Â  Â  <div id="chatWindow" class="chat-window">
Â  Â  Â  <div class="chat-bubble bot">
Â  Â  Â  Â  <img src="assets/bot-avatar.png" alt="Bot">
Â  Â  Â  Â  <p>Hey there! I'm here to support you. How are you feeling today?</p>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <form id="chatForm" class="chat-form">
Â  Â  Â  <input type="text" id="chatInput" placeholder="Type your message..." required />
Â  Â  Â  <button type="submit">Send</button>
Â  Â  </form>
Â  </main>

Â  <footer>
Â  Â  <p>&copy; 2025 NarcStop AI | We're here for your recovery journey ðŸ’™</p>
Â  </footer>

Â  <script>
Â  Â  const chatWindow = document.getElementById('chatWindow');

Â  Â  function addMessage(message, sender = 'user') {
Â  Â  Â  const bubble = document.createElement('div');
Â  Â  Â  bubble.className = `chat-bubble ${sender}`;
Â  Â  Â  bubble.innerHTML = `
Â  Â  Â  Â  <img src="assets/${sender}-avatar.png" alt="${sender}" />
Â  Â  Â  Â  <p>${message}</p>
Â  Â  Â  `;
Â  Â  Â  chatWindow.appendChild(bubble);
Â  Â  Â  chatWindow.scrollTop = chatWindow.scrollHeight;
Â  Â  }

Â  Â  document.getElementById('chatForm').addEventListener('submit', async (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  const input = document.getElementById('chatInput');
Â  Â  Â  const msg = input.value.trim();
Â  Â  Â  if (!msg) return;

Â  Â  Â  addMessage(msg, 'user');
Â  Â  Â  input.value = '';

Â  Â  Â  addMessage('Typing...', 'bot');
Â  Â  Â  const bubbles = document.querySelectorAll('.bot');
Â  Â  Â  const typingBubble = bubbles[bubbles.length - 1];

Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch('/api/chatbot', {
Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  body: JSON.stringify({ message: msg })
Â  Â  Â  Â  });

Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  typingBubble.remove();
Â  Â  Â  Â  addMessage(data.reply, 'bot');
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  typingBubble.remove();
Â  Â  Â  Â  addMessage('Sorry, something went wrong. Please try again later.', 'bot');
Â  Â  Â  }
Â  Â  });

Â  Â  document.getElementById("darkModeToggle").addEventListener("click", () => {
Â  Â  Â  document.body.classList.toggle("dark-mode");
Â  Â  });
Â  </script>
</body>
</html>
